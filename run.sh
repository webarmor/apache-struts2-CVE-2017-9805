#!/bin/bash

docker run --name=struts --rm -it -p 8080:8080 -v /home/oliver/webarmor/lua-hooks/:/usr/local/tomcat/lua-hooks/ -e CATALINA_OPTS="${CATALINA_OPTS} -javaagent:/usr/local/tomcat/lib/immunio-2.0.2.jar" -e IMMUNIO_LOG_LEVEL=debug -e IMMUNIO_LOG_TIMINGS=true -e IMMUNIO_DEV_MODE=true -e IMMUNIO_DEBUG_MODE=true -e IMMUNIO_HOOK_HANDLERS_DIRECTORY=/usr/local/tomcat/lua-hooks/hooks/ -e IMMUNIO_HELLO_URL='https://agent-stg.immun.io' -e IMMUNIO_KEY=ccc48048-9e93-4919-8c0d-7fc4739029e7 -e IMMUNIO_SECRET=7fad73fc-83db-47ff-b960-c279c1123279 -e IMMUNIO_CODE_PROTECTION_PLUGINS_ENABLED=true oliver/apache-struts2-cve-2017-9805
